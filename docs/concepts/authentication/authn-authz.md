---
sidebar_position: 1
---

# Providing Authentication for Tests

Levo's autogenerated Test Plans, evaluate API vulnerabilities related to [`Horizontal Authorization Abuse`][horizontal-priv-abuse], and [`Vertical Authorization Abuse`][vertical-priv-abuse].

In order to effectively access and test APIs for these vulnerabilities, Levo requires user `authentication` and `role` information.

This information can be provided in a secure, and structured manner via an `environment.yaml` file.

## How do I use `environment.yaml` file?

The `environment.yaml` file is autogenerated per `Test Plan`, and needs to be completed with appropriate authentication/role information, prior to the execution of the Test Plan.

The completed file is provided as an argument to the CLI. The CLI uses the credentials to access the target APIs and evaluate their authentication and authorization posture.

## Are my `secrets` sent to Levo SaaS?

The `environment.yaml` file contains `secrets` and is **never** sent to, or stored in Levo SaaS. This file is solely consumed by the CLI, and Levo SaaS does not have access to your secrets.

Please treat this file securely, and take all precautions necessary for handling secrets.

## What is the structure of this autogenerated file?

Based on the nature of your APIs, the file may require credentials for more than one user (especially if your APIs have a lot of roles/scopes).

### The API being tested has *`no`* granular role or scope information
If the API endpoints you are testing have no role or scope information (used for granular authorization), then autogenerated file will have the below structure.

```YAML
iam:
  users:
  - name: user_1
    default: true
    bearer_tokens:
    - name: bearerAuth
      value: <Enter the bearer token>
  - name: user_2
    bearer_tokens:
    - name: bearerAuth
      value: <Enter the bearer token>
```
The default authentication mechanism used by Levo is [Bearer Authentication][bearer-auth]. You are required to provide
valid `bearer tokens` for two users above (`user_1` and `user_2`).

If you are wondering why bearer tokens for two users are required, `user_1` is the `default` user, that is used in most of the API testing.

`user_2` specifies credentials for another user (at the same role level as `user_1`), and is used in [`horizontal privilege escalation`][idor] tests.


### The API being tested has granular role or scope information
This capability is currently not available and is coming soon

### Does Levo support other authentication methods?
The next section describes support for various standard and custom authentication methods.


[horizontal-priv-abuse]: https://en.wikipedia.org/wiki/Privilege_escalation#Horizontal
[vertical-priv-abuse]: https://en.wikipedia.org/wiki/Privilege_escalation#Vertical
[idor]: ../../issues/vulnerabilities/IDOR

[bearer-auth]: https://swagger.io/docs/specification/authentication/bearer-authentication/

